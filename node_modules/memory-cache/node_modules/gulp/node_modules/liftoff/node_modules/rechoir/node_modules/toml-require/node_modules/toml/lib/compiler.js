function compile(nodes) {
  var assignedPaths = [];
  var currentPath = '';
  var data = {};
  var context = data;
  var arrayMode = false;

  return reduce(nodes);

  function reduce(nodes) {
    var node;
    for (var i in nodes) {
      node = nodes[i];
      switch (node.type) {
      case 'Assign':
        assign(node);
        break;
      case 'ObjectPath':
        setPath(node);
        break;
      case 'ArrayPath':
        addTableArray(node);
        break;
      }
    }

    return data;
  }

  
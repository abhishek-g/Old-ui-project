var codein = require("node-codein");
var RabbitMQ = require('./index');
var queue = new RabbitMQ;
var config = {
		host : '0.0.0.0',
		port : '5672',
		login : 'guest',
		password : 'guest',
		vhost : '/'
	};
var qconn = queue.connect(config);
qconn.on('ready',function(){
	queue.sub("test4", {bind:{exchangeType:"direct",routing_key:"#"},ack:true, durable:true,prefetchCount :25}, function (msg, q) {
		console.log(msg);
		q.acknowledge();
	});
});



setTimeout( function(){
	for(var i=0;i<100;i++){
		queue.pub('test4',{msg:"Hi"+i});
	}
	
},5000);	